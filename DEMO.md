# P2B QR Code Demo


## QR Code Scheme

<!-- TODO: describe the scheme and format here -->
To intiate the transaction a Payer needs to scan the QR Code generated by a global BUSINESS registry. The QR Code includes standardized information on the PartyIdType, PartyIdentifier and PartySubIdOrType to determine the unique identity of the BUSINESS.

For demo purposes we encode only the following three values, however a real world scenario would contain items such as signatures etc.

The iQR code should contain enough information to execute a Mojaloop `GET /Parties call.`

For more information see the following:

* [Mojaloop API](http://docs.mojaloop.io/api/fspiop/v1.1/api-definition.html#api-resource-parties)
* [Mojaloop partyIdType](http://docs.mojaloop.io/api/fspiop/v1.1/api-definition.html#partyidtype-enum)

### Description
The QR Code payload is a JSON object containing the following:

* A key of `PartyIdType` and value from the `PartyIdType Enum`

* A key of [`PartyIdentifier`](http://docs.mojaloop.io/api/fspiop/v1.1/api-definition.html#partyidentifier-element) and a value of type `string`

* An optional JSON value pair with the name `PartySubIdOrType` and a value of type `string`
```json
{
  "PartyIdType": string, (actually this could be more strict)
  "PartyIdentifier": string,
  "PartySubIdOrType": optional string
}
```

for example,

A basic Merchant identifier with a Business's Phone number
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "04404400404"
}
```

This correlates to a Mojaloop `GET /parties` request of:
```
GET /parties/BUSINESS/04404400404
```

A Merchant identifier with a business ID held by some regulatory authority
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "abn_12345"
}
```

This correlates to a Mojaloop `GET /parties` request of:
```
GET /parties/BUSINESS/abn_12345
```

A Merchant identifier with a business' phone number and a till number
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "04404400404",
  "PartySubIdOrType": "3312"
}
```

This correlates to a Mojaloop `GET /parties` request of:
```
GET /parties/BUSINESS/04404400404/3312
```

A Merchant identifier with a business' email address and store location
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "123456@business.com",
  "PartySubIdOrType": "RundleStreet"
}
```

This correlates to a Mojaloop `GET /parties` request of:
```
GET /parties/BUSINESS/123456@business.com/RundleStreet
```

For the sake of this demo, follow these steps to generate a Merchant QR Code

1. Register the Party with the Merchant Oracle (Out of scope of this guide).
1. Set the `PartIdType` to `BUSINESS`.
1. Set the `PartyIdentifier` and optionally the `PartySubIdOrType` to the information as registered with the Oracle.
1. whitespace is removed and JSON string is validated.
1. Go to this [website](https://app.qr-code-generator.com/) to create a QR Code from the JSON string.
1. Save the QR Code to be displayed and used.

## For Example, the following
A Merchant requires a Static QR code to provide a way for customers to pay at his convenience store.

The Merchant registers with his phone number and inputs the following information into the JSON string.
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "0412345678",
}
```
whitespace is removed and the JSON string has been validated.

using the [website](https://app.qr-code-generator.com/) the following QR Code was generated.
![](images/QRCodeExample1.png)

<br>

A Merchant requires multiple static QR Codes to provide a way for customers to pay him to seperate locations.

The Merchant registers with his email address and store locations and inputs the following information into the JSON string.

```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "merchant@email.com",
  "PartySubIdOrType": "Norwood"
}
```
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "merchant@email.com",
  "PartySubIdOrType": "Grange"
}
```
whitespace is removed and the JSON string has been validated.

using the [website](https://app.qr-code-generator.com/) the following QR Codes were generated.
![](images/QRCodeExample2.png)
![](images/QRCodeExample3.png)

<br>

A Merchant requires multiple static QR Codes to provide a way for customers to pay him to seperate departments.

The Merchant registers with his government issued business ID and department names and inputs the following information into the JSON string.

```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "abn_4567",
  "PartySubIdOrType": "Restaurant"
}
```
```json
{
  "PartyIdType": "BUSINESS",
  "PartyIdentifier": "abn_4567",
  "PartySubIdOrType": "Hotel"
}
```
whitespace is removed and the JSON string has been validated.

using the [website](https://app.qr-code-generator.com/) the following QR Codes were generated.
![](images/QRCodeExample4.png)
![](images/QRCodeExample5.png)

<br>
